import { useState, useEffect, useRef } from 'react';
import { useNavigate, Navigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import bgImg from '../assets/firstScreen.JPG';
import secondScreen from '../assets/bgJSSS.jpg';
import scrollDown from '../assets/scroll-down.svg';
import arrowRight from '../assets/arrow-right.svg';
import logoV2 from '../assets/logoV2.svg';
import openEye from '../assets/openEye.png';
import closeEye from '../assets/closeEye.png';
import { getFontStyle } from '../utils/fontUtils';
import MobileNotSupported from '../components/MobileNotSupported';

const LoginPage = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const [bgLoaded, setBgLoaded] = useState(false);
  const [showPassword, setShowPassword] = useState(false);
  const [isMobile, setIsMobile] = useState(false);
  const { login, isAuthenticated, user, loading: authLoading } = useAuth();
  const navigate = useNavigate();
  const firstSectionRef = useRef<HTMLDivElement>(null);
  const secondSectionRef = useRef<HTMLDivElement>(null);
  const isScrollingRef = useRef(false);
  
  // Время перехода в миллисекундах (можно изменить здесь)
  const SCROLL_DURATION = 2000;

  // Проверка размера экрана для мобильных устройств
  useEffect(() => {
    const checkScreenSize = () => {
      setIsMobile(window.innerWidth < 1024); // lg breakpoint в Tailwind
    };

    // Проверяем при загрузке
    checkScreenSize();

    // Проверяем при изменении размера окна
    window.addEventListener('resize', checkScreenSize);

    return () => {
      window.removeEventListener('resize', checkScreenSize);
    };
  }, []);

  // Если пользователь уже залогинен, редиректим в зависимости от роли
  useEffect(() => {
    // Ждем полной загрузки пользователя (не только сессии, но и профиля)
    if (!authLoading && isAuthenticated && user && user.role) {
      if (user.role === 'organizer') {
        navigate('/organizer', { replace: true });
      } else {
        navigate('/dashboard', { replace: true });
      }
    }
  }, [isAuthenticated, authLoading, user, navigate]);

  useEffect(() => {
    // Запускаем анимацию после небольшой задержки для плавности
    const timer = setTimeout(() => {
      setBgLoaded(true);
    }, 300);

    return () => clearTimeout(timer);
  }, []);

  // Функция плавного скролла с контролируемой длительностью
  const smoothScrollTo = (targetPosition: number, duration: number) => {
    const startPosition = window.pageYOffset || document.documentElement.scrollTop;
    const distance = targetPosition - startPosition;
    let startTime: number | null = null;

    const animation = (currentTime: number) => {
      if (startTime === null) startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const progress = Math.min(timeElapsed / duration, 1);
      
      // Easing функция для плавности (easeInOutCubic)
      const ease = progress < 0.5
        ? 4 * progress * progress * progress
        : 1 - Math.pow(-2 * progress + 2, 3) / 2;
      
      window.scrollTo(0, startPosition + distance * ease);
      
      if (timeElapsed < duration) {
        requestAnimationFrame(animation);
      } else {
        // Разблокируем скролл после завершения анимации
        isScrollingRef.current = false;
        document.body.style.overflow = '';
      }
    };

    requestAnimationFrame(animation);
  };

  useEffect(() => {
    const handleWheel = (e: WheelEvent) => {
      // Если идет анимация скролла - блокируем все события
      if (isScrollingRef.current) {
        e.preventDefault();
        e.stopPropagation();
        return;
      }

      if (!firstSectionRef.current || !secondSectionRef.current) {
        return;
      }

      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const firstSectionHeight = firstSectionRef.current.offsetHeight;
      const secondSectionTop = secondSectionRef.current.offsetTop;

      // Проверяем, находимся ли мы на первой секции (в пределах её высоты)
      const isOnFirstSection = scrollTop < firstSectionHeight - 50; // небольшой отступ для плавности
      
      // Проверяем, находимся ли мы на второй секции
      const isOnSecondSection = scrollTop >= secondSectionTop - 50 && scrollTop < secondSectionTop + 100;

      // Скролл вниз на первой секции - переходим на вторую
      if (isOnFirstSection && e.deltaY > 0) {
        e.preventDefault();
        e.stopPropagation();
        isScrollingRef.current = true;
        
        // Блокируем скролл через CSS
        document.body.style.overflow = 'hidden';
        
        smoothScrollTo(secondSectionTop, SCROLL_DURATION);
      }
      // Скролл вверх на второй секции - возвращаемся на первую
      else if (isOnSecondSection && e.deltaY < 0) {
        e.preventDefault();
        e.stopPropagation();
        isScrollingRef.current = true;
        
        // Блокируем скролл через CSS
        document.body.style.overflow = 'hidden';
        
        smoothScrollTo(0, SCROLL_DURATION);
      }
    };

    // Обработчик для блокировки скролла клавиатурой
    const handleKeyDown = (e: KeyboardEvent) => {
      if (isScrollingRef.current && (
        e.key === 'ArrowUp' || 
        e.key === 'ArrowDown' || 
        e.key === 'PageUp' || 
        e.key === 'PageDown' ||
        e.key === 'Home' ||
        e.key === 'End'
      )) {
        e.preventDefault();
        e.stopPropagation();
      }
    };

    // Обработчик для блокировки touch-скролла
    const handleTouchMove = (e: TouchEvent) => {
      if (isScrollingRef.current) {
        e.preventDefault();
        e.stopPropagation();
      }
    };

    window.addEventListener('wheel', handleWheel, { passive: false });
    window.addEventListener('keydown', handleKeyDown, { passive: false });
    window.addEventListener('touchmove', handleTouchMove, { passive: false });

    return () => {
      window.removeEventListener('wheel', handleWheel);
      window.removeEventListener('keydown', handleKeyDown);
      window.removeEventListener('touchmove', handleTouchMove);
      // Восстанавливаем скролл при размонтировании
      document.body.style.overflow = '';
    };
  }, []);

  // Показываем страницу для мобильных устройств, если экран меньше ноутбучного
  if (isMobile) {
    return <MobileNotSupported />;
  }

  // Если пользователь уже залогинен, редиректим в зависимости от роли
  if (isAuthenticated && user) {
    if (user.role === 'organizer') {
      return <Navigate to="/organizer" replace />;
    }
    return <Navigate to="/dashboard" replace />;
  }

  // Показываем загрузку только при первой загрузке страницы (когда еще нет данных о пользователе)
  // После логина редирект происходит сразу, поэтому экран загрузки не нужен
  if (authLoading) {
    return null; // Не показываем экран загрузки, просто ничего не рендерим
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    try {
      await login(email, password);
      // Перенаправление произойдет автоматически через useEffect при обновлении user
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : 'Неверный email или пароль';
      setError(errorMessage);
    } finally {
      setLoading(false);
    }
  };


  return (
    <div className='relative bg-white overflow-x-hidden'>
      {/* Первая секция - занимает весь экран */}
      <div ref={firstSectionRef} className='relative h-screen'>
        {/* Белый фон - базовый слой */}
        {/* <div className='absolute inset-0 bg-white z-0' /> */}

      {/* Контейнер с изображением и overlay - с анимацией расширяющегося круга */}
      <div
        className={`absolute inset-0 z-10 ${bgLoaded ? 'circle-reveal' : ''}`}
        style={!bgLoaded ? {
          clipPath: 'circle(0% at 50% 100%)',
        } : {}}
      >
        {/* Фоновое изображение - базовый слой */}
        <img
          src={bgImg}
          alt=""
          className='absolute inset-0 w-full h-full'
          style={{
            objectFit: 'cover',
            objectPosition: 'center 80%',
            filter: 'blur(1.5px)',
          }}
        />
        
        {/* Радиальный градиент overlay - черный с 0% в центре, черный с 50% на 50% позиции */}
        <div
          className='absolute inset-0'
          style={{
            background: 'radial-gradient(circle, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.5) 50%)',
          }}
        />
      </div>

      {/* Контейнер с логотипом и текстом - объединенный для удобства управления позиционированием */}
      <div 
        className="absolute z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-[55%] flex flex-col items-center justify-center w-auto"
      >
        {/* Логотип */}
        <div className="w-[200px] h-[200px] md:w-[300px] md:h-[300px] lg:w-[240px] lg:h-[240px] max-[1599px]:lg:w-[200px] max-[1599px]:lg:h-[200px] xl:w-[300px] max-[1599px]:xl:w-[240px] min-[1600px]:xl:h-[300px] overflow-visible flex items-center justify-center">
        <svg 
          width="225" 
          height="232" 
          viewBox="0 0 225 232" 
          fill="none" 
          xmlns="http://www.w3.org/2000/svg" 
          className={`w-[150px] h-[155px] md:w-[225px] md:h-[232px] lg:w-[180px] lg:h-[186px] max-[1599px]:lg:w-[150px] max-[1599px]:lg:h-[155px] xl:w-[225px] max-[1599px]:xl:w-[180px] min-[1600px]:xl:h-[232px] ${bgLoaded ? 'logo-fill-animate' : 'logo-fill-black'}`} 
          style={{ overflow: 'visible' }}
        >
          {/* Круговой текст */}
          <g className="logo-circle-text">
            <path d="M127.22 230.879C127.22 230.879 127.27 230.909 127.27 230.949C127.27 230.989 127.26 231.009 127.24 231.019L125.35 231.209C125.13 231.229 124.75 231.079 124.19 230.759C123.66 231.289 122.95 231.599 122.06 231.689C121.53 231.749 121.08 231.709 120.7 231.599C120.32 231.479 120.03 231.309 119.83 231.069C119.63 230.839 119.51 230.579 119.48 230.289C119.44 229.919 119.54 229.579 119.76 229.259C119.98 228.939 120.33 228.559 120.81 228.129C120.67 227.979 120.53 227.809 120.4 227.609C120.27 227.409 120.17 227.209 120.09 227.019C120.01 226.829 119.96 226.629 119.94 226.399C119.88 225.779 120.02 225.249 120.38 224.809C120.73 224.369 121.25 224.119 121.94 224.049C122.42 223.999 122.8 224.059 123.1 224.239C123.4 224.409 123.56 224.679 123.6 225.039C123.63 225.339 123.57 225.619 123.42 225.889C123.27 226.159 123.1 226.389 122.89 226.579C122.68 226.769 122.36 227.049 121.93 227.409C122.57 228.169 123.42 228.899 124.49 229.589C124.53 229.309 124.54 229.009 124.5 228.669C124.45 228.219 124.35 227.909 124.18 227.719C124.01 227.529 123.77 227.449 123.43 227.489C123.41 227.489 123.4 227.469 123.39 227.419C123.39 227.379 123.39 227.349 123.41 227.349L126.15 227.059C126.15 227.059 126.19 227.079 126.19 227.129C126.19 227.179 126.19 227.199 126.16 227.199C125.93 227.219 125.76 227.269 125.66 227.329C125.55 227.389 125.48 227.479 125.43 227.599C125.38 227.719 125.34 227.909 125.3 228.169C125.25 228.489 125.19 228.769 125.12 229.039C125.05 229.299 124.96 229.559 124.84 229.809C125.38 230.139 125.85 230.389 126.26 230.559C126.67 230.739 126.99 230.839 127.22 230.879ZM122.89 231.029C123.34 230.989 123.69 230.849 123.96 230.619C123.83 230.549 123.65 230.439 123.43 230.289C123.01 230.009 122.58 229.699 122.14 229.359C121.71 229.009 121.32 228.669 120.98 228.319C120.67 228.719 120.54 229.109 120.58 229.509C120.61 229.809 120.73 230.079 120.93 230.329C121.13 230.579 121.4 230.769 121.74 230.899C122.08 231.029 122.46 231.079 122.89 231.029ZM92.28 230.629C91.41 230.479 90.69 230.199 90.1 229.769C89.52 229.339 89.1 228.819 88.85 228.199C88.6 227.589 88.53 226.939 88.65 226.269C88.77 225.549 89.07 224.929 89.55 224.429C90.03 223.919 90.63 223.569 91.37 223.369C92.1 223.169 92.89 223.139 93.73 223.279C94.09 223.339 94.46 223.429 94.81 223.549C95.17 223.669 95.45 223.789 95.65 223.919C95.73 223.969 95.77 223.999 95.78 224.019C95.78 224.039 95.78 224.109 95.78 224.209L95.66 225.819C95.66 225.819 95.63 225.849 95.59 225.859C95.55 225.859 95.52 225.839 95.52 225.809C95.46 225.539 95.35 225.239 95.18 224.909C95.01 224.579 94.76 224.269 94.44 223.989C94.12 223.709 93.72 223.529 93.25 223.449C92.76 223.369 92.3 223.429 91.85 223.629C91.4 223.829 91.02 224.159 90.71 224.609C90.39 225.069 90.18 225.619 90.07 226.279C89.95 226.989 89.98 227.659 90.15 228.269C90.33 228.879 90.63 229.379 91.05 229.769C91.48 230.159 91.99 230.409 92.59 230.509C92.9 230.559 93.15 230.569 93.33 230.529C93.51 230.489 93.65 230.379 93.76 230.189C93.87 229.999 93.96 229.719 94.02 229.329C94.09 228.929 94.11 228.649 94.09 228.489C94.07 228.329 93.99 228.209 93.85 228.129C93.71 228.049 93.45 227.979 93.08 227.919C93.03 227.919 93.02 227.879 93.03 227.819C93.03 227.799 93.04 227.779 93.06 227.759C93.07 227.739 93.09 227.739 93.1 227.739C93.74 227.889 94.26 227.989 94.67 228.059C95.06 228.119 95.46 228.179 95.89 228.229C95.92 228.229 95.93 228.259 95.93 228.319C95.93 228.369 95.9 228.399 95.86 228.389C95.72 228.359 95.62 228.369 95.56 228.419C95.49 228.469 95.44 228.579 95.39 228.749C95.34 228.919 95.29 229.229 95.21 229.659C95.15 229.999 95.13 230.249 95.13 230.399C95.13 230.549 95.13 230.639 95.13 230.679C95.13 230.729 95.11 230.749 95.09 230.769C95.07 230.779 95.04 230.789 94.98 230.799C93.96 230.849 93.06 230.799 92.28 230.679V230.629ZM120.92 225.299C120.98 225.899 121.26 226.529 121.75 227.179C122.24 226.589 122.46 225.999 122.39 225.399C122.36 225.059 122.25 224.809 122.07 224.629C121.89 224.449 121.68 224.379 121.42 224.409C121.21 224.429 121.06 224.519 120.98 224.669C120.9 224.819 120.88 225.029 120.91 225.309L120.92 225.299ZM79.8 220.309C79.8 220.309 79.81 220.339 79.8 220.379C79.78 220.419 79.77 220.439 79.75 220.439C79.46 220.339 79.19 220.379 78.94 220.549C78.69 220.719 78.51 220.999 78.38 221.389L76.48 226.999C76.48 226.999 76.45 227.029 76.42 227.029C76.39 227.029 76.36 227.009 76.35 226.999L73.18 219.409L71.74 223.679C71.61 224.069 71.59 224.399 71.67 224.679C71.75 224.959 71.94 225.149 72.22 225.249C72.23 225.249 72.23 225.279 72.22 225.319C72.2 225.359 72.19 225.379 72.18 225.379C71.97 225.309 71.82 225.259 71.71 225.209L71.12 224.999L70.44 224.779C70.31 224.749 70.13 224.689 69.9 224.609C69.88 224.609 69.87 224.579 69.89 224.529C69.9 224.489 69.92 224.469 69.95 224.479C70.27 224.589 70.56 224.559 70.83 224.399C71.09 224.239 71.29 223.959 71.42 223.569L72.99 218.929C72.84 218.589 72.69 218.339 72.55 218.179C72.41 218.019 72.25 217.909 72.07 217.849C72.06 217.849 72.06 217.819 72.07 217.779C72.09 217.739 72.1 217.719 72.11 217.719L72.57 217.889C72.66 217.929 72.8 217.979 72.98 218.039L73.82 218.309C73.92 218.339 74.05 218.379 74.2 218.429C74.26 218.449 74.3 218.479 74.32 218.519C74.34 218.559 74.37 218.639 74.41 218.759C74.48 218.969 74.53 219.109 74.56 219.189L76.88 224.849L78.08 221.309C78.21 220.919 78.24 220.579 78.15 220.299C78.07 220.019 77.88 219.829 77.6 219.729C77.59 219.729 77.59 219.699 77.6 219.659C77.61 219.619 77.63 219.599 77.64 219.599L78.11 219.769C78.34 219.859 78.53 219.939 78.69 219.989C78.84 220.039 79.04 220.099 79.31 220.179L79.81 220.339L79.8 220.309ZM154.3 221.979C154.3 221.979 154.3 221.949 154.33 221.939C154.35 221.939 154.37 221.929 154.4 221.939C154.42 221.939 154.43 221.949 154.44 221.959C154.58 222.549 154.73 223.079 154.91 223.539C154.93 223.599 154.94 223.639 154.92 223.679C154.91 223.709 154.87 223.739 154.8 223.769L150.01 225.559C150.01 225.559 149.97 225.549 149.95 225.509C149.93 225.469 149.94 225.439 149.95 225.429C150.18 225.339 150.34 225.259 150.43 225.189C150.52 225.109 150.57 225.019 150.56 224.899C150.56 224.779 150.51 224.609 150.43 224.399L148.55 219.379C148.47 219.159 148.39 219.009 148.32 218.919C148.25 218.829 148.15 218.789 148.02 218.789C147.9 218.789 147.72 218.829 147.5 218.919C147.48 218.919 147.46 218.919 147.44 218.869C147.42 218.829 147.43 218.799 147.44 218.789L152.04 217.069C152.11 217.039 152.16 217.069 152.19 217.129L152.75 218.559C152.75 218.559 152.74 218.589 152.7 218.609C152.66 218.629 152.64 218.629 152.62 218.609C152.35 218.229 152.04 217.999 151.69 217.899C151.34 217.799 150.94 217.839 150.49 217.999L150.16 218.119C149.94 218.199 149.8 218.309 149.74 218.439C149.67 218.569 149.68 218.739 149.75 218.929L150.58 221.139L151.48 220.799C151.9 220.639 152.19 220.449 152.36 220.219C152.53 219.989 152.57 219.749 152.47 219.489C152.47 219.469 152.47 219.449 152.52 219.429C152.56 219.419 152.58 219.419 152.59 219.439L152.94 220.419L153.15 220.939C153.26 221.179 153.34 221.369 153.39 221.519C153.39 221.529 153.38 221.549 153.33 221.569C153.29 221.589 153.26 221.589 153.26 221.569C153.15 221.269 152.95 221.079 152.66 220.999C152.37 220.919 152.01 220.949 151.58 221.109L150.69 221.439L151.61 223.889C151.69 224.099 151.79 224.239 151.9 224.309C152.02 224.379 152.16 224.379 152.34 224.319L152.7 224.189C153.26 223.979 153.67 223.699 153.93 223.339C154.18 222.979 154.3 222.529 154.28 221.989L154.3 221.979ZM59.45 218.959C59.34 219.169 59.28 219.339 59.27 219.449C59.26 219.559 59.29 219.659 59.37 219.749C59.45 219.829 59.6 219.929 59.82 220.039C59.84 220.049 59.84 220.079 59.82 220.119C59.8 220.159 59.78 220.179 59.76 220.169C59.53 220.049 59.36 219.959 59.23 219.889L58.45 219.479L57.68 219.099C57.54 219.039 57.35 218.949 57.12 218.829C57.11 218.829 57.11 218.799 57.13 218.759C57.15 218.719 57.17 218.699 57.18 218.709C57.4 218.819 57.57 218.879 57.69 218.899C57.81 218.919 57.91 218.889 58 218.809C58.09 218.729 58.18 218.579 58.29 218.379L60.7 213.589C60.8 213.379 60.86 213.219 60.87 213.109C60.88 212.989 60.84 212.889 60.76 212.799C60.68 212.709 60.52 212.609 60.3 212.499C60.29 212.499 60.29 212.469 60.31 212.429C60.33 212.389 60.35 212.369 60.36 212.379L60.91 212.669C61.22 212.839 61.47 212.979 61.67 213.079C61.88 213.189 62.15 213.309 62.48 213.459L63.01 213.719C63.01 213.719 63.03 213.759 63.01 213.799C62.99 213.839 62.97 213.859 62.95 213.849C62.74 213.739 62.57 213.679 62.44 213.669C62.32 213.659 62.21 213.699 62.13 213.779C62.05 213.859 61.95 214.009 61.85 214.209L59.45 218.979V218.959ZM168.07 209.199C168.07 209.199 168.11 209.199 168.13 209.239C168.15 209.279 168.15 209.309 168.13 209.319C167.89 209.459 167.71 209.689 167.61 210.029C167.51 210.369 167.49 210.759 167.56 211.199L168.45 217.239C168.45 217.239 168.43 217.299 168.36 217.339C168.29 217.379 168.25 217.379 168.23 217.359L162.62 213.309C162.36 213.129 162.14 213.019 161.96 212.969C161.77 212.919 161.61 212.939 161.46 213.019C161.44 213.029 161.42 213.019 161.4 212.979C161.38 212.939 161.38 212.909 161.4 212.899C161.5 212.839 161.57 212.809 161.62 212.789C161.76 212.729 161.94 212.639 162.16 212.519C162.74 212.199 163.23 211.919 163.63 211.679C163.73 211.609 163.87 211.539 164.03 211.449C164.05 211.439 164.07 211.449 164.09 211.489C164.11 211.529 164.11 211.559 164.09 211.569C163.89 211.679 163.75 211.809 163.69 211.959C163.62 212.109 163.64 212.259 163.72 212.409C163.78 212.519 163.9 212.639 164.06 212.759L167.88 215.529L167.28 211.329C167.24 211.099 167.19 210.919 167.11 210.789C166.99 210.579 166.84 210.449 166.65 210.399C166.46 210.349 166.24 210.389 166.01 210.519C165.99 210.529 165.97 210.519 165.95 210.479C165.93 210.439 165.93 210.409 165.95 210.399L166.45 210.139C166.74 209.999 167 209.859 167.22 209.739C167.35 209.669 167.5 209.569 167.69 209.459L168.1 209.219L168.07 209.199ZM44.22 211.099C44.02 210.959 43.78 210.779 43.52 210.569C43.42 210.489 43.3 210.399 43.16 210.289C43.01 210.179 42.85 210.059 42.67 209.929L41.96 209.449C41.83 209.369 41.66 209.249 41.44 209.099C41.43 209.099 41.44 209.069 41.46 209.029C41.49 208.989 41.51 208.979 41.52 208.989C41.72 209.129 41.88 209.219 42 209.249C42.12 209.279 42.22 209.269 42.32 209.199C42.42 209.129 42.53 208.999 42.67 208.809L45.72 204.399C45.85 204.209 45.93 204.059 45.96 203.939C45.99 203.829 45.96 203.719 45.9 203.619C45.83 203.519 45.7 203.399 45.5 203.269C45.48 203.259 45.48 203.229 45.51 203.189C45.54 203.149 45.56 203.139 45.58 203.149L46.08 203.509C46.36 203.729 46.59 203.889 46.76 204.009C47.02 204.189 47.29 204.359 47.58 204.529C47.92 204.749 48.14 204.889 48.26 204.969C48.9 205.409 49.38 205.929 49.71 206.529C50.03 207.129 50.18 207.739 50.15 208.369C50.12 208.999 49.92 209.579 49.54 210.129C49.11 210.749 48.6 211.189 47.99 211.469C47.38 211.749 46.75 211.849 46.09 211.769C45.43 211.699 44.82 211.459 44.25 211.069L44.22 211.099ZM44.28 210.819C44.69 211.099 45.12 211.249 45.57 211.249C46.02 211.249 46.48 211.119 46.93 210.839C47.39 210.549 47.81 210.129 48.2 209.559C48.57 209.019 48.83 208.469 48.97 207.919C49.11 207.359 49.12 206.849 48.99 206.389C48.86 205.919 48.6 205.559 48.2 205.279C47.81 205.009 47.51 204.859 47.31 204.829C47.11 204.799 46.93 204.919 46.76 205.159L43.8 209.439C43.62 209.689 43.57 209.919 43.63 210.119C43.69 210.319 43.91 210.549 44.29 210.809L44.28 210.819ZM183.47 205.039C183.47 205.039 183.47 205.009 183.49 204.989C183.51 204.979 183.53 204.969 183.55 204.969C183.57 204.969 183.59 204.969 183.59 204.969C183.89 205.499 184.19 205.959 184.49 206.349C184.53 206.399 184.55 206.439 184.54 206.479C184.54 206.519 184.51 206.549 184.45 206.599L180.38 209.689C180.38 209.689 180.34 209.689 180.31 209.659C180.28 209.619 180.28 209.599 180.3 209.579C180.5 209.429 180.63 209.309 180.69 209.209C180.76 209.109 180.77 209.009 180.73 208.889C180.69 208.779 180.61 208.629 180.46 208.449L177.22 204.179C177.08 203.999 176.96 203.869 176.87 203.809C176.77 203.749 176.67 203.729 176.55 203.769C176.43 203.809 176.28 203.899 176.09 204.039C176.07 204.049 176.05 204.039 176.02 204.009C175.99 203.969 175.99 203.949 176.01 203.929L179.92 200.959C179.98 200.909 180.03 200.919 180.07 200.969L181.02 202.179C181.02 202.179 181.02 202.219 180.99 202.249C180.96 202.279 180.94 202.289 180.92 202.279C180.55 201.999 180.18 201.859 179.82 201.859C179.46 201.859 179.08 202.009 178.7 202.299L178.42 202.509C178.24 202.649 178.13 202.789 178.11 202.939C178.08 203.089 178.13 203.239 178.26 203.409L179.69 205.289L180.46 204.709C180.82 204.439 181.04 204.169 181.14 203.899C181.24 203.629 181.2 203.389 181.03 203.169C181.02 203.149 181.03 203.129 181.06 203.099C181.09 203.069 181.12 203.069 181.13 203.089L181.75 203.929L182.1 204.369C182.27 204.569 182.4 204.729 182.5 204.849C182.5 204.859 182.5 204.879 182.46 204.909C182.42 204.939 182.4 204.949 182.39 204.929C182.2 204.679 181.95 204.549 181.65 204.559C181.35 204.559 181.01 204.699 180.65 204.979L179.89 205.549L181.47 207.629C181.61 207.809 181.74 207.909 181.87 207.949C182 207.989 182.14 207.949 182.29 207.829L182.59 207.599C183.07 207.239 183.38 206.849 183.52 206.429C183.66 206.009 183.64 205.549 183.46 205.029L183.47 205.039ZM30.01 199.519C29.83 199.349 29.63 199.139 29.4 198.889C29.32 198.799 29.21 198.689 29.08 198.559C28.95 198.429 28.81 198.289 28.65 198.129L28.02 197.549C27.9 197.449 27.75 197.309 27.56 197.129C27.55 197.119 27.56 197.099 27.59 197.059C27.62 197.029 27.64 197.019 27.65 197.029C27.83 197.199 27.97 197.309 28.08 197.359C28.19 197.409 28.3 197.409 28.41 197.359C28.52 197.309 28.65 197.199 28.81 197.029L32.5 193.139C32.66 192.969 32.76 192.829 32.8 192.729C32.84 192.619 32.84 192.509 32.79 192.409C32.74 192.299 32.63 192.169 32.45 191.999C32.43 191.979 32.44 191.959 32.47 191.929C32.5 191.899 32.53 191.889 32.54 191.899L32.98 192.329C33.23 192.589 33.43 192.789 33.58 192.929C33.81 193.149 34.05 193.359 34.31 193.569C34.61 193.839 34.81 194.019 34.91 194.109C35.48 194.649 35.87 195.239 36.1 195.879C36.33 196.519 36.38 197.149 36.25 197.759C36.12 198.369 35.83 198.919 35.37 199.399C34.85 199.939 34.27 200.299 33.63 200.479C32.99 200.659 32.34 200.659 31.71 200.479C31.07 200.309 30.5 199.979 30 199.499L30.01 199.519ZM30.11 199.249C30.47 199.589 30.87 199.799 31.32 199.879C31.77 199.959 32.24 199.889 32.73 199.679C33.22 199.469 33.71 199.109 34.18 198.609C34.63 198.129 34.97 197.629 35.19 197.109C35.41 196.579 35.5 196.079 35.44 195.599C35.38 195.119 35.18 194.709 34.83 194.379C34.48 194.049 34.21 193.859 34.02 193.799C33.83 193.739 33.63 193.829 33.42 194.039L29.83 197.819C29.62 198.039 29.53 198.259 29.56 198.459C29.59 198.659 29.77 198.929 30.11 199.239V199.249ZM193.44 188.369C193.44 188.369 193.47 188.369 193.51 188.399C193.54 188.429 193.55 188.449 193.54 188.469C193.32 188.689 193.24 188.949 193.29 189.249C193.34 189.549 193.51 189.839 193.81 190.119L198.06 194.249C198.06 194.249 198.08 194.289 198.06 194.319C198.04 194.349 198.02 194.369 198 194.369L189.79 193.949L193.02 197.089C193.31 197.379 193.6 197.539 193.89 197.589C194.18 197.629 194.43 197.549 194.64 197.329C194.65 197.319 194.67 197.329 194.7 197.359C194.73 197.389 194.75 197.409 194.73 197.429C194.58 197.579 194.46 197.699 194.38 197.779L193.94 198.219L193.45 198.739C193.36 198.839 193.23 198.979 193.06 199.149C193.04 199.169 193.02 199.149 192.99 199.129C192.96 199.099 192.95 199.069 192.96 199.059C193.2 198.819 193.3 198.539 193.26 198.229C193.22 197.919 193.06 197.629 192.77 197.339L189.26 193.929C188.88 193.919 188.59 193.939 188.39 193.999C188.19 194.059 188.02 194.159 187.89 194.289C187.88 194.299 187.86 194.289 187.82 194.259C187.79 194.229 187.77 194.209 187.79 194.189L188.14 193.849C188.22 193.779 188.32 193.679 188.46 193.539L189.06 192.899C189.13 192.819 189.22 192.719 189.33 192.609C189.37 192.569 189.42 192.539 189.46 192.539C189.5 192.539 189.59 192.539 189.71 192.559C189.93 192.589 190.08 192.609 190.16 192.609L196.26 192.959L193.58 190.349C193.28 190.059 192.99 189.889 192.7 189.849C192.41 189.809 192.16 189.889 191.95 190.109C191.94 190.119 191.92 190.109 191.88 190.079C191.85 190.049 191.84 190.029 191.85 190.009L192.21 189.659C192.39 189.489 192.54 189.349 192.66 189.229C192.77 189.119 192.91 188.959 193.09 188.749L193.45 188.369H193.44ZM21.54 187.669C21.54 187.669 21.57 187.669 21.59 187.689C21.6 187.709 21.61 187.729 21.62 187.749C21.62 187.769 21.62 187.789 21.62 187.789C21.1 188.099 20.64 188.409 20.25 188.709C20.2 188.749 20.16 188.769 20.12 188.759C20.09 188.759 20.05 188.729 20 188.679L16.84 184.649C16.84 184.649 16.84 184.609 16.87 184.579C16.91 184.549 16.93 184.549 16.95 184.559C17.1 184.759 17.23 184.879 17.33 184.949C17.43 185.019 17.53 185.029 17.65 184.989C17.76 184.949 17.91 184.859 18.09 184.719L22.31 181.419C22.49 181.279 22.61 181.159 22.68 181.059C22.74 180.959 22.75 180.859 22.71 180.739C22.67 180.619 22.58 180.469 22.43 180.279C22.42 180.259 22.43 180.239 22.46 180.209C22.5 180.179 22.52 180.179 22.54 180.189L25.57 184.049C25.62 184.109 25.61 184.159 25.56 184.209L24.36 185.179C24.36 185.179 24.33 185.179 24.29 185.149C24.26 185.119 24.25 185.099 24.26 185.079C24.54 184.709 24.67 184.339 24.66 183.969C24.65 183.609 24.5 183.239 24.2 182.859L23.99 182.589C23.85 182.409 23.7 182.309 23.56 182.279C23.41 182.259 23.26 182.309 23.1 182.439L21.24 183.899L21.83 184.659C22.11 185.009 22.38 185.229 22.65 185.329C22.92 185.419 23.16 185.379 23.38 185.209C23.4 185.199 23.42 185.209 23.45 185.239C23.48 185.269 23.48 185.299 23.46 185.309L22.63 185.939L22.2 186.289C22 186.459 21.84 186.599 21.72 186.689C21.71 186.689 21.69 186.689 21.66 186.649C21.63 186.609 21.62 186.589 21.64 186.579C21.89 186.379 22.01 186.129 22 185.829C22 185.529 21.85 185.199 21.57 184.839L20.98 184.089L18.92 185.699C18.74 185.839 18.64 185.969 18.61 186.109C18.58 186.239 18.61 186.379 18.73 186.529L18.97 186.829C19.34 187.299 19.74 187.609 20.15 187.739C20.57 187.869 21.03 187.849 21.54 187.659V187.669ZM201.04 179.329C200.51 180.079 200.61 180.959 201.35 181.979C201.36 181.999 201.35 182.019 201.33 182.049C201.31 182.079 201.28 182.089 201.26 182.069C201.03 181.869 200.72 181.609 200.34 181.289C199.96 180.969 199.67 180.739 199.47 180.599C199.44 180.579 199.44 180.549 199.46 180.509C199.48 180.479 199.51 180.469 199.54 180.489C199.68 180.589 199.88 180.459 200.13 180.099C200.53 179.569 200.99 178.949 201.51 178.219C201.77 177.849 202.05 177.449 202.33 177.029L202.78 176.379C202.95 176.139 203.06 175.959 203.11 175.819C203.16 175.689 203.14 175.569 203.07 175.469C203.05 175.449 203.05 175.419 203.07 175.379C203.09 175.349 203.12 175.339 203.14 175.349C203.31 175.499 203.6 175.739 204 176.059C204.4 176.379 204.72 176.629 204.98 176.799C205 176.809 205 176.839 204.98 176.869C204.96 176.899 204.94 176.909 204.91 176.909C204.36 176.659 203.87 176.579 203.45 176.659C203.02 176.749 202.68 176.979 202.41 177.349C202.28 177.529 202.23 177.679 202.27 177.799C202.31 177.919 202.43 178.049 202.65 178.209L207 181.309C207.2 181.449 207.35 181.529 207.46 181.549C207.57 181.569 207.69 181.549 207.79 181.459C207.9 181.379 208.03 181.219 208.2 180.979C208.21 180.959 208.24 180.959 208.28 180.989C208.32 181.019 208.33 181.039 208.32 181.059C208.16 181.289 208.03 181.459 207.93 181.589L207.36 182.359L206.83 183.129C206.74 183.269 206.62 183.449 206.45 183.679C206.44 183.699 206.41 183.689 206.37 183.669C206.33 183.639 206.32 183.619 206.33 183.599C206.49 183.369 206.6 183.189 206.64 183.059C206.69 182.929 206.68 182.809 206.62 182.699C206.56 182.589 206.43 182.469 206.24 182.339L201.87 179.229C201.66 179.079 201.49 178.999 201.38 179.009C201.26 179.009 201.14 179.099 201.02 179.279L201.04 179.329ZM17.13 172.419C17.13 172.419 17.13 172.449 17.08 172.469C17.04 172.489 17.02 172.499 17.01 172.479C16.87 172.229 16.63 172.059 16.3 171.949C15.97 171.849 15.57 171.829 15.12 171.899L9.08001 172.809C9.08001 172.809 9.01001 172.789 8.98001 172.719C8.94001 172.649 8.94001 172.609 8.96001 172.589L10.98 169.769L7.67001 170.269C7.67001 170.269 7.61001 170.249 7.57001 170.179C7.53001 170.109 7.52001 170.069 7.55001 170.049L11.59 164.429C11.75 164.209 11.86 164.039 11.92 163.919C11.98 163.799 12.01 163.699 12 163.599C12 163.499 11.95 163.389 11.88 163.259C11.87 163.239 11.88 163.219 11.92 163.199C11.96 163.179 11.99 163.179 12 163.199C12.06 163.299 12.09 163.369 12.11 163.419C12.17 163.559 12.26 163.739 12.38 163.959C12.63 164.409 12.85 164.789 13.04 165.089C13.1 165.169 13.16 165.279 13.23 165.409C13.24 165.429 13.23 165.449 13.19 165.469C13.15 165.489 13.12 165.489 13.11 165.469C13.02 165.299 12.93 165.189 12.86 165.139C12.79 165.089 12.71 165.089 12.62 165.139C12.5 165.199 12.33 165.409 12.08 165.739L9.23001 169.709L11.25 169.419L13 166.979C13.18 166.729 13.3 166.519 13.36 166.359C13.42 166.189 13.42 166.049 13.36 165.939C13.35 165.919 13.36 165.899 13.4 165.879C13.44 165.859 13.47 165.859 13.48 165.879C13.52 165.949 13.56 166.029 13.6 166.129C13.64 166.229 13.71 166.359 13.8 166.529C14.01 166.909 14.2 167.229 14.35 167.479C14.4 167.539 14.45 167.629 14.51 167.739C14.52 167.759 14.51 167.779 14.47 167.799C14.43 167.819 14.4 167.819 14.39 167.799C14.34 167.709 14.29 167.639 14.24 167.609C14.19 167.579 14.14 167.579 14.08 167.609C13.97 167.669 13.77 167.899 13.49 168.289L12.8 169.259L13.62 169.139C14.09 169.079 14.42 168.989 14.61 168.879C14.81 168.769 14.86 168.629 14.76 168.459C14.75 168.439 14.76 168.419 14.8 168.399C14.84 168.379 14.87 168.379 14.88 168.399C14.91 168.449 14.94 168.519 14.96 168.589C14.99 168.659 15.07 168.819 15.21 169.079C15.27 169.189 15.36 169.329 15.46 169.479L15.68 169.849C15.68 169.849 15.68 169.879 15.63 169.899C15.59 169.919 15.57 169.929 15.56 169.909C15.31 169.459 14.7 169.309 13.74 169.449L12.53 169.629L10.65 172.269L14.87 171.629C15.13 171.589 15.35 171.519 15.52 171.429C15.73 171.309 15.87 171.169 15.93 170.999C15.99 170.829 15.98 170.649 15.88 170.479C15.87 170.459 15.88 170.439 15.92 170.419C15.96 170.399 15.99 170.399 16 170.419L16.25 170.889C16.37 171.139 16.49 171.369 16.6 171.569C16.68 171.709 16.77 171.859 16.88 172.019L17.13 172.449V172.419ZM210.33 166.119C210.58 166.249 210.83 166.299 211.09 166.269C211.35 166.239 211.6 166.169 211.84 166.059C212.08 165.949 212.38 165.789 212.75 165.579C213.15 165.349 213.48 165.169 213.75 165.049C214.02 164.929 214.31 164.859 214.62 164.829C214.93 164.809 215.24 164.879 215.55 165.029C215.91 165.209 216.18 165.469 216.35 165.809C216.53 166.149 216.61 166.519 216.59 166.939C216.57 167.359 216.45 167.779 216.24 168.199C216.08 168.509 215.87 168.809 215.61 169.099C215.35 169.389 215.14 169.569 214.98 169.629C214.94 169.649 214.9 169.659 214.86 169.669C214.83 169.669 214.78 169.669 214.73 169.629L213.08 168.819H213.07C213.07 168.819 213.04 168.779 213.05 168.739C213.06 168.699 213.09 168.689 213.12 168.699C213.64 168.699 214.08 168.699 214.42 168.679C214.76 168.659 215.09 168.579 215.41 168.449C215.73 168.309 215.97 168.099 216.12 167.789C216.26 167.519 216.3 167.249 216.25 166.999C216.19 166.749 215.99 166.529 215.63 166.339C215.33 166.189 215.03 166.119 214.73 166.129C214.44 166.149 214.16 166.209 213.9 166.319C213.64 166.429 213.32 166.599 212.93 166.819C212.55 167.039 212.23 167.199 211.99 167.309C211.75 167.409 211.48 167.479 211.2 167.499C210.92 167.519 210.64 167.459 210.35 167.309C209.99 167.119 209.73 166.859 209.59 166.519C209.45 166.179 209.4 165.819 209.45 165.429C209.5 165.039 209.62 164.659 209.8 164.299C209.92 164.059 210.07 163.829 210.24 163.599C210.41 163.379 210.57 163.199 210.71 163.089C210.77 163.039 210.82 163.019 210.86 163.009C210.9 163.009 210.95 163.009 210.99 163.039L212.5 163.819C212.5 163.819 212.53 163.859 212.52 163.899C212.52 163.939 212.5 163.959 212.47 163.949L212.23 163.929C211.71 163.879 211.24 163.889 210.82 163.969C210.4 164.049 210.08 164.289 209.87 164.699C209.73 164.979 209.69 165.239 209.76 165.499C209.83 165.759 210.01 165.959 210.31 166.119H210.33ZM2.76001 131.539C4.03001 131.539 5.07001 132.569 5.07001 133.839C5.07001 135.109 4.04001 136.139 2.76001 136.139C1.48001 136.139 0.45001 135.109 0.45001 133.839C0.45001 132.569 1.48001 131.539 2.76001 131.539ZM221.37 131.539C222.64 131.539 223.68 132.569 223.68 133.839C223.68 135.109 222.65 136.139 221.37 136.139C220.09 136.139 219.06 135.109 219.06 133.839C219.06 132.569 220.09 131.539 221.37 131.539ZM14.78 96.3688C15.11 95.9388 15.32 95.4288 15.42 94.9388C15.75 93.3088 14.84 92.1088 13.02 91.7588L0.36001 89.3088L0.0100098 91.0488L12.98 93.5588C13.99 93.7588 15.09 93.9688 14.85 95.1088C14.78 95.4788 14.6 95.7588 14.31 96.0288L14.79 96.3688H14.78ZM210.95 91.9988C211.62 95.0488 215.21 96.7988 218.67 96.0688C222.14 95.3388 224.69 92.2988 224.02 89.2488C223.35 86.2088 219.73 84.4688 216.27 85.1988C212.8 85.9288 210.28 88.9588 210.96 91.9988H210.95ZM217.22 86.8788C220.51 86.1888 222.66 87.0888 223.4 88.9988C223.65 91.3788 221.31 93.6388 217.7 94.3988C214.51 95.0688 212.28 94.1788 211.54 92.1888C211.27 89.7488 213.63 87.6288 217.21 86.8788H217.22ZM6.51001 69.8888L6.28001 70.4988C6.79001 70.6588 9.84001 71.6888 11.21 72.1788L14.03 73.1888C17.03 74.2688 17.45 76.0988 16.82 77.7388C16.08 79.6788 14.42 80.0588 11.79 79.1088L4.06001 76.3288L3.43001 77.9988L11.53 80.9188C14.49 81.9788 16.44 80.5488 17.3 78.2688C17.92 76.6288 18.12 74.0588 14.22 72.6588L6.50001 69.8788L6.51001 69.8888ZM203.98 70.6388L204.67 72.2888L208.93 70.5988L211.66 71.5688L206.77 77.3388L207.58 79.2788L213.48 72.2088L219.37 74.2888L219.02 73.4388C218.3 73.2288 217.09 72.8688 216.33 72.5988L209.75 70.2788L216.57 67.5788L215.88 65.9388L203.97 70.6488L203.98 70.6388ZM22.83 65.5088L26.36 59.5688L25.78 59.2388C25.54 59.6788 24.44 61.6388 24.05 62.2888L23.23 63.6788L12.62 57.7088L11.71 59.2488L22.84 65.5088H22.83ZM198.59 60.8688L199.28 61.9188L210.1 55.1588L209.74 54.6088C209.47 54.7888 206.62 56.6588 204.84 57.7688L200.98 60.1788L205.95 48.8688L205.27 47.8288L194.45 54.5888L194.81 55.1288C195 54.9988 197.93 53.0788 199.71 51.9688L203.53 49.5788L198.59 60.8588V60.8688ZM31.68 52.0988L32.79 50.6888L22.59 43.0688L21.48 44.4788L31.68 52.0988ZM189.15 37.6588L193.49 33.8088L198.26 39.1888L197.76 39.6288C197.43 39.2188 195.87 37.3888 195.37 36.8288L194.29 35.6088L190.25 39.1888C190.3 39.2788 190.34 39.3788 190.38 39.4688C190.79 40.3488 191.15 41.2888 192.17 41.7088L192.49 41.8588L191.96 42.3288L191.92 42.3088C190.74 41.8188 190.26 40.7588 189.79 39.7388C189.77 39.6988 189.76 39.6688 189.74 39.6288L185.54 43.3488L186.68 44.6288C187.17 45.1788 188.81 46.9488 189.18 47.3288L188.68 47.7788L183.85 42.3388L188.65 38.0788C188.45 37.9388 188.22 37.8388 187.94 37.7688L187.71 37.7188L188.3 37.1988C188.63 37.2988 188.91 37.4588 189.14 37.6388L189.15 37.6588ZM36 38.5888L32.82 31.6988L33.71 30.8488L45.71 37.0888L44.29 38.4488L40.65 36.5388L40.13 36.2688C39.64 37.2388 38.7 37.7088 37.79 38.1688C37.42 38.3588 37.06 38.5388 36.75 38.7788L36.84 38.9788C36.88 39.0588 37.22 39.8188 37.22 39.8188C38.09 41.6688 38.82 43.1388 39.02 43.4888L38.48 44.0088L36.28 39.2288C36.11 39.4588 35.98 39.7288 35.91 40.0688L35.85 40.3888L35.21 40.2688L35.27 39.9488C35.38 39.3688 35.64 38.9288 35.98 38.5888H36ZM36.49 38.1788C36.8 37.9588 37.15 37.7688 37.51 37.5888C38.3 37.1888 39.14 36.8188 39.57 35.9688L34.14 33.1288L36.49 38.1788ZM168.84 29.8088L170.29 30.8888L174.11 26.0288L178.62 29.3888L174.8 34.2588L176.25 35.3388L184.06 25.3988L182.61 24.3188L178.98 28.9388L174.47 25.5788L178.1 20.9588L176.65 19.8788L168.84 29.8188V29.8088ZM63.17 11.9888C62.11 11.8288 60.83 11.8488 59.76 12.3988C58.14 13.2288 57.5 15.0188 58.42 16.7188C59.12 18.0288 60.43 18.6388 62.62 18.9188C64.75 19.1988 65.68 19.4888 66.22 20.4788C66.87 21.6788 66.43 22.9888 65.13 23.6588C64.22 24.1288 63.22 24.0988 62.28 23.8488L62.24 24.5488C63.38 24.6988 64.57 24.6488 65.61 24.1188C67.41 23.1988 68.41 21.1088 67.36 19.1588C66.66 17.8588 65.71 17.5088 62.93 17.0788C60.55 16.7088 59.7 16.3688 59.2 15.4388C58.62 14.3688 59.16 13.3788 60.07 12.9088C60.85 12.5088 62.01 12.4588 63.13 12.6688L63.17 11.9888ZM161.53 22.3488C160.57 22.9688 159.21 23.4988 157.68 22.7588C155.35 21.6288 154.79 18.5488 156.57 15.0888C158.07 12.1588 159.97 11.1088 162.27 11.9588C162.72 12.2488 164.08 14.2988 164.5 15.0588L165.74 13.8488C164.95 12.8888 163.59 11.9888 162.79 11.5988C159.79 10.1388 156.17 11.8388 154.59 14.9288C152.98 18.0688 153.86 21.8088 156.71 23.1988C158.5 24.0688 160.48 23.7188 161.82 22.9288L161.53 22.3588V22.3488ZM82.68 17.1788C85.74 16.2588 87.22 12.6288 86.17 9.32878C85.12 6.02878 81.79 3.81878 78.73 4.73878C75.68 5.65878 74.21 9.31878 75.26 12.6188C76.31 15.9188 79.63 18.0988 82.68 17.1788ZM76.9 11.5288C75.91 8.39878 76.64 6.22878 78.53 5.34878C80.94 4.89878 83.45 6.96878 84.55 10.4088C85.51 13.4388 84.8 15.6888 82.83 16.5688C80.36 17.0388 77.99 14.9388 76.9 11.5288ZM133.42 14.7088L137.15 15.7088C140.68 16.6588 143.87 14.5988 144.85 11.1088C145.88 7.47878 143.68 4.47878 139.8 3.43878L136.83 2.63878L133.42 14.7088ZM135.34 14.6188L138.44 3.66878L139.67 3.99878C141.75 4.55878 144.13 6.67878 142.91 10.9788C142.06 13.9888 140.23 15.4188 137.85 15.2888L135.34 14.6188ZM97.7 13.5288L104.71 12.7888L104.64 12.1388C104.13 12.2088 101.86 12.4988 101.09 12.5788L99.45 12.7488L98.13 0.878781L96.32 1.06878L97.7 13.5188V13.5288ZM118.03 13.0088C121.23 13.1988 123.93 10.3188 124.14 6.86878C124.36 3.41878 122.05 0.198781 118.85 0.00878106C115.66 -0.181219 112.96 2.73878 112.74 6.17878C112.52 9.62878 114.84 12.8088 118.02 12.9988L118.03 13.0088ZM114.67 5.73878C114.88 2.46878 116.35 0.698781 118.44 0.518781C120.86 0.928781 122.46 3.73878 122.23 7.31878C122.03 10.4888 120.54 12.3388 118.38 12.4888C115.9 12.0788 114.44 9.29878 114.67 5.73878Z" fill="white"/>
          </g>
          {/* Монограмма JS */}
          <path fillRule="evenodd" clipRule="evenodd" d="M85.1 63.4388C85.1 63.4388 85.09 63.4788 85.09 63.4988C85.07 63.5988 85.06 63.7288 85.06 63.8888C85.06 64.0488 85.06 64.1688 85.09 64.2788C85.09 64.2988 85.09 64.3188 85.1 64.3388C88.23 64.3388 90.54 64.5888 92.03 65.0488C93.61 65.5488 94.69 66.4388 95.28 67.6988C95.85 68.9188 96.14 70.8288 96.14 73.4388V112.369L95.86 112.689C75.02 115.479 65.15 134.549 70.13 147.689C71.26 150.659 75.51 156.049 81.17 156.179C91.08 156.409 101.15 149.599 103.37 137.199C104.16 132.819 104.77 126.859 104.79 119.729V115.879L105.18 115.979C114.62 118.289 126.77 123.319 135.6 130.949C141.52 136.069 145.94 142.349 147.09 149.759C147.87 154.819 145.95 160.669 142.77 163.239C139.94 165.529 136.37 166.619 132.13 166.619C126 166.619 121.08 164.349 117.37 159.819C113.69 155.329 111 149.919 109.29 143.589C109.24 143.409 109.08 143.399 108.83 143.439C108.73 143.459 108.65 143.479 108.59 143.509C108.55 143.529 108.51 143.549 108.5 143.579C108.5 143.609 108.5 143.639 108.5 143.679V143.709L109.91 161.559C109.99 162.189 110.1 162.659 110.26 162.979C110.41 163.269 110.67 163.519 111.02 163.739C116.32 166.769 122.38 168.279 129.2 168.279C134.58 168.279 139.25 167.339 143.2 165.449C147.13 163.569 150.12 160.999 152.17 157.739C154.22 154.479 155.24 150.799 155.24 146.699C155.24 144.139 154.06 139.389 149.71 134.199L149.61 134.079C147.57 131.679 144.86 129.189 141.26 126.779C130.85 119.809 119.93 114.919 110.39 113.189L110.16 113.149C109.47 113.029 108.79 112.919 108.12 112.829C107.11 112.699 106.1 112.589 105.08 112.519L104.79 112.499V73.6988C104.79 71.1088 105.01 69.1788 105.44 67.9288C105.9 66.6088 106.8 65.6688 108.17 65.1288C109.45 64.6188 111.45 64.3488 114.17 64.3388C114.17 64.3188 114.18 64.2988 114.19 64.2788C114.21 64.1788 114.22 64.0488 114.22 63.8888C114.22 63.7288 114.22 63.6088 114.19 63.4988C114.19 63.4788 114.19 63.4588 114.18 63.4388L108.56 63.5588C105.33 63.7288 102.57 63.8188 100.27 63.8188C98.32 63.8188 95.55 63.7288 91.98 63.5588L85.09 63.4388H85.1ZM96.13 126.539C96.08 133.129 95.8 138.789 94.29 143.019C92.11 149.109 85.96 152.789 80.64 152.779C77.03 152.779 73.8 151.099 72.36 147.389C69.65 140.399 70.88 131.819 76.23 125.169C82.19 117.759 93.52 115.149 95.8 114.959L96.14 114.929V126.539H96.13ZM149.59 89.2988C144.79 87.3588 139.78 86.3988 134.56 86.3988C130.44 86.3988 126.53 87.1288 122.83 88.6088C119.15 90.0688 116.18 92.2888 113.92 95.2588C111.67 98.2188 110.55 101.829 110.55 106.079C110.55 107.699 110.71 109.229 111.04 110.659C115.04 111.399 119.27 112.669 123.61 114.399C122.53 113.279 121.55 112.049 120.67 110.709C119.02 108.199 118.2 105.299 118.2 101.999C118.2 97.9188 119.4 94.5388 121.78 91.8588C124.17 89.1688 127.66 87.8088 132.27 87.8088C137.99 87.8088 142.36 89.8488 145.39 93.9188C148.39 97.9488 150.32 102.229 151.18 106.769C151.23 106.949 151.39 106.959 151.64 106.909C151.91 106.859 152.08 106.779 152.08 106.589L151.32 91.3188V91.2988C151.32 90.4688 150.73 89.8288 149.6 89.2988H149.59Z" fill="white"/>
        </svg>
        </div>

        {/* Текст */}
        {(() => {
          const welcomeText = "We are happy to welcome you to your personal planning space.";
          return (
            <h1 
              className={`text-[24px] md:text-[40px] lg:text-[36px] max-[1599px]:lg:text-[28px] xl:text-[50px] max-[1599px]:xl:text-[32px] font-normal whitespace-nowrap mt-6 md:mt-10 lg:mt-6 max-[1599px]:lg:mt-5 xl:mt-10 max-[1599px]:xl:mt-6 min-[1600px]:xl:mt-10 pb-2.5 text-center px-4 ${bgLoaded ? 'text-white-animate' : 'text-black'}`}
              style={getFontStyle(welcomeText)}
            >
              {welcomeText}
            </h1>
          );
        })()}
        {(() => {
          const descText = "From this moment on, you're in trusted hands. Let's design a celebration that feels unmistakably yours.";
          return (
            <p 
              className={`mt-4 lg:mt-2 max-[1599px]:lg:mt-2 xl:mt-4 max-[1599px]:xl:mt-3 min-[1600px]:xl:mt-4 font-gilroy text-[16px] md:text-[24px] lg:text-[20px] max-[1599px]:lg:text-[16px] xl:text-[32px] max-[1599px]:xl:text-[20px] font-light whitespace-nowrap text-center px-4 ${bgLoaded ? 'text-white-animate' : 'text-black'}`}
              style={getFontStyle(descText)}
            >
              {descText}
            </p>
          );
        })()}
      </div>

        {/* Scroll down indicator - внизу экрана, появляется вместе с изображением */}
        <div 
          className={`absolute bottom-4 lg:bottom-4 max-[1599px]:lg:bottom-4 min-[1600px]:xl:bottom-8 left-1/2 transform -translate-x-1/2 z-30 flex flex-col items-center scroll-indicator-reveal ${
            bgLoaded ? 'scroll-indicator-visible' : ''
          }`}
        >
          <img src={scrollDown} alt="scrollDown" className='animate-pulse-opacity' />
          <p className='mt-2 text-white font-gilroy text-sm md:text-base lg:text-sm xl:text-base'>Scroll down to continue</p>
        </div>
      </div>

      {/* Вторая секция */}
      <div 
        ref={secondSectionRef}
        className='relative h-screen w-full'
      >
        {/* Фоновое изображение */}
        <div
          className='absolute inset-0 bg-cover'
          style={{
            backgroundImage: `url(${secondScreen})`,
            backgroundPosition: 'center 35%',
          }}
        />
        
        {/* Черный overlay для радиального градиента */}
        <div
          className='absolute inset-0'
          style={{
            background: 'radial-gradient(circle, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%)',
          }}
        />
        
        {/* Белый overlay - 100% opacity */}
        <div
          // className='absolute inset-0'
          // style={{
          //   backgroundColor: 'rgba(255, 255, 255, 1)',
          //   mixBlendMode: 'overlay',
          // }}
        />

        {/* Форма входа */}
        <div className='relative z-20 flex flex-col items-center justify-center h-full py-4 max-[1599px]:py-6 min-[1600px]:py-8'>
          {/* Логотип над формой */}
          <div className="mb-6 max-[1599px]:mb-4 lg:max-[1599px]:mb-4 min-[1300px]:max-[1599px]:mb-5 min-[1600px]:mb-8">
            <img src={logoV2} alt="logo" className="w-auto h-auto max-w-[90vw] md:max-w-[80vw] lg:max-w-[65vw] max-[1599px]:lg:max-w-[60vw] min-[1300px]:max-[1599px]:max-w-[65vw] min-[1600px]:max-w-none" style={{ maxHeight: '140px', objectFit: 'contain' }} />
          </div>
          <form 
            onSubmit={handleSubmit}
            className='relative bg-[#FBF9F5B2] backdrop-blur-sm w-auto max-w-[420px] md:max-w-[480px] lg:max-w-[440px] max-[1599px]:lg:max-w-[400px] min-[1300px]:max-[1599px]:max-w-[440px] min-[1600px]:max-w-[520px] xl:max-w-[580px] max-[1599px]:xl:max-w-[460px] min-[1600px]:xl:max-w-[640px] p-3 md:p-4 lg:p-3 max-[1599px]:lg:p-3 min-[1300px]:max-[1599px]:p-4 min-[1600px]:p-6 xl:p-6 max-[1599px]:xl:p-4 min-[1600px]:xl:p-8 mx-4 flex flex-col items-center justify-center'
          >
            <div className='flex flex-col items-center justify-center mb-6 max-[1599px]:mb-5 lg:max-[1599px]:mb-4 min-[1300px]:max-[1599px]:mb-5 min-[1600px]:mb-7 xl:mb-9 max-[1599px]:xl:mb-6 min-[1600px]:xl:mb-9 w-full'>
             
              
              <h1 
                className='text-black text-[18px] md:text-[20px] lg:text-[18px] max-[1599px]:lg:text-[17px] min-[1300px]:max-[1599px]:text-[20px] min-[1600px]:text-[24px] xl:text-[28px] max-[1599px]:xl:text-[22px] min-[1600px]:xl:text-[32px] font-branch font-regular mt-3 md:mt-3 lg:mt-2 max-[1599px]:lg:mt-2 min-[1300px]:max-[1599px]:mt-3 min-[1600px]:mt-4 xl:mt-5 max-[1599px]:xl:mt-3 min-[1600px]:xl:mt-6 mb-1.5 text-center'
              >
                Enter your account
              </h1>
              <p className='text-black text-brown font-gilroy font-light mb-3 md:mb-3 lg:mb-2 max-[1599px]:lg:mb-2 min-[1300px]:max-[1599px]:mb-3 min-[1600px]:mb-4 xl:mb-5 max-[1599px]:xl:mb-3 min-[1600px]:xl:mb-6 text-center text-[11px] md:text-[12px] lg:text-[11px] max-[1599px]:lg:text-[10px] min-[1300px]:max-[1599px]:text-[12px] min-[1600px]:text-[13px] xl:text-[15px] max-[1599px]:xl:text-[13px] min-[1600px]:xl:text-[17px] px-3 md:px-6 lg:px-4 max-[1599px]:lg:px-3 min-[1300px]:max-[1599px]:px-6 min-[1600px]:px-8 xl:px-10 max-[1599px]:xl:px-6 min-[1600px]:xl:px-14'>
                Here you'll find all documents, timelines, updates, and planning tools – everything you need to feel confident, informed, and supported at every stage.
              </p>
              {/* Контейнер для изображения loginCircle и полосок */}
            </div>

            {/* Поле Email */}
            <div className='mb-4 max-[1599px]:mb-3 lg:max-[1599px]:mb-3 min-[1300px]:max-[1599px]:mb-4 min-[1600px]:mb-5 xl:mb-6 max-[1599px]:xl:mb-4 min-[1600px]:xl:mb-6 self-start w-full'>
              <label 
                htmlFor='email' 
                className='block text-sm font-gilroy mb-1.5 text-[11px] md:text-[11px] lg:text-[10px] max-[1599px]:lg:text-[10px] min-[1300px]:max-[1599px]:text-[11px] min-[1600px]:text-[13px] xl:text-[14px] max-[1599px]:xl:text-[12px] min-[1600px]:xl:text-[15px]'
                style={{ color: 'black', fontWeight: "400" }}
              >
                Email
              </label>
              <input
                type='email'
                id='email'
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                placeholder='Enter your Email'
                className='w-full bg-transparent border-0 border-b-1 focus:outline-none focus:border-b-1 pb-1.5 font-gilroy text-[11px] md:text-[11px] lg:text-[10px] max-[1599px]:lg:text-[10px] min-[1300px]:max-[1599px]:text-[11px] min-[1600px]:text-[13px] xl:text-[14px] max-[1599px]:xl:text-[12px] min-[1600px]:xl:text-[15px] pl-1'
                style={{ 
                  borderColor: '#00000080',
                  color: 'black',
                  backgroundColor: 'transparent',
                }}
                autoComplete='off'
              />
            </div>

            {/* Поле Password */}
            <div className='mb-6 max-[1599px]:mb-4 lg:max-[1599px]:mb-4 min-[1300px]:max-[1599px]:mb-5 min-[1600px]:mb-6 xl:mb-8 max-[1599px]:xl:mb-6 min-[1600px]:xl:mb-8 self-start w-full'>
              <label 
                htmlFor='password' 
                className='block text-sm font-gilroy mb-1.5 text-[11px] md:text-[11px] lg:text-[10px] max-[1599px]:lg:text-[10px] min-[1300px]:max-[1599px]:text-[11px] min-[1600px]:text-[13px] xl:text-[14px] max-[1599px]:xl:text-[12px] min-[1600px]:xl:text-[15px]'
                style={{ color: 'black', fontWeight: "400" }}
              >
                Password
              </label>
              <div className='relative w-full'>
                <input
                  type={showPassword ? 'text' : 'password'}
                  id='password'
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  placeholder='Enter your password'
                    className='w-full bg-transparent border-0 border-b-1 focus:outline-none focus:border-b-1 pb-1.5 pr-8 font-gilroy text-[11px] md:text-[11px] lg:text-[10px] max-[1599px]:lg:text-[10px] min-[1300px]:max-[1599px]:text-[11px] min-[1600px]:text-[13px] xl:text-[14px] max-[1599px]:xl:text-[12px] min-[1600px]:xl:text-[15px] pl-1'
                  style={{ 
                    borderColor: '#00000080',
                    color: 'black',
                    backgroundColor: 'transparent',
                  }}
                  autoComplete='off'
                />
                <button
                  type='button'
                  onClick={() => setShowPassword(!showPassword)}
                  className='absolute right-0 top-0 bottom-0 flex items-center cursor-pointer focus:outline-none'
                  style={{ paddingBottom: '8px' }}
                >
                  <img 
                    src={showPassword ? openEye : closeEye} 
                    alt={showPassword ? 'Hide password' : 'Show password'} 
                    className='w-5 h-5'
                  />
                </button>
              </div>
            </div>

            {/* Кнопка входа */}
            <button
              type='submit'
              disabled={loading}
              className='w-full py-1.5 md:py-2 lg:py-1.5 max-[1599px]:lg:py-1.5 min-[1300px]:max-[1599px]:py-2 min-[1600px]:py-2.5 xl:py-3 max-[1599px]:xl:py-2.5 min-[1600px]:xl:py-4 border font-gilroy text-lg flex items-center justify-center gap-1.5 max-[1599px]:gap-1.5 min-[1600px]:gap-2 transition-all disabled:opacity-50 cursor-pointer relative overflow-hidden group'
              style={{ 
                borderColor: 'black',
                color: 'black',
              }}
            >
              {/* Затемнение при наведении */}
              <div className='absolute inset-0 bg-black opacity-0 group-hover:opacity-[0.05] transition-opacity duration-300'></div>
              <span className='relative z-10 font-branch text-[18px] md:text-[20px] lg:text-[18px] max-[1599px]:lg:text-[17px] min-[1300px]:max-[1599px]:text-[20px] min-[1600px]:text-[24px] xl:text-[28px] max-[1599px]:xl:text-[22px] min-[1600px]:xl:text-[32px]'>
                Start the preparation
              </span>
              <img src={arrowRight} alt="arrow" className='relative z-10 arrow-hover-animate w-4 h-4 md:w-5 md:h-5 lg:w-4 lg:h-4 max-[1599px]:lg:w-3.5 max-[1599px]:lg:h-3.5 min-[1300px]:max-[1599px]:w-4 min-[1300px]:max-[1599px]:h-4 min-[1600px]:w-5 min-[1600px]:h-5 xl:w-6 xl:h-6 max-[1599px]:xl:w-4.5 max-[1599px]:xl:h-4.5 min-[1600px]:xl:w-6 min-[1600px]:xl:h-6' />
            </button>

            {/* Сообщение об ошибке */}
            {error && (
              <div className='mt-4 text-sm font-branch text-red-600 text-center'>
                {error}
              </div>
            )}
          </form>
        </div>
      </div>

    </div>
  );
};

export default LoginPage;

